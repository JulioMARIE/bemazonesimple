{"ast":null,"code":"import _regeneratorRuntime from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\n\nvar _this = this,\n    _jsxFileName = \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\src\\\\UserEditScreen.js\";\n\nimport axios from 'axios';\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport Container from 'react-bootstrap/Container';\nimport Card from 'react-bootstrap/Card';\nimport Form from 'react-bootstrap/Form';\nimport { Helmet } from 'react-helmet-async';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport LoadingBox from './LoadingBox';\nimport MessageBox from './MessageBox';\nimport { Store } from './Store';\nimport { getError } from './utils';\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return _objectSpread({}, state, {\n        loading: true\n      });\n\n    case 'FETCH_SUCCESS':\n      return _objectSpread({}, state, {\n        loading: false\n      });\n\n    case 'FETCH_FAIL':\n      return _objectSpread({}, state, {\n        loading: false,\n        error: action.payload\n      });\n\n    case 'UPDATE_REQUEST':\n      return _objectSpread({}, state, {\n        loadingUpdate: true\n      });\n\n    case 'UPDATE_SUCCESS':\n      return _objectSpread({}, state, {\n        loadingUpdate: false\n      });\n\n    case 'UPDATE_FAIL':\n      return _objectSpread({}, state, {\n        loadingUpdate: false\n      });\n\n    default:\n      return state;\n  }\n};\n\nvar UserEditScreen = function UserEditScreen() {\n  var _useReducer = useReducer(reducer, {\n    loading: true,\n    error: ''\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      _useReducer2$ = _useReducer2[0],\n      loading = _useReducer2$.loading,\n      error = _useReducer2$.error,\n      loadingUpdate = _useReducer2$.loadingUpdate,\n      dispatch = _useReducer2[1];\n\n  var _useContext = useContext(Store),\n      state = _useContext.state;\n\n  var userInfo = state.userInfo;\n  var params = useParams();\n  var userId = params.id;\n  var navigate = useNavigate();\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isAdmin = _useState6[0],\n      setIsAdmin = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isSeller = _useState8[0],\n      setIsSeller = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isValideSeller = _useState10[0],\n      setIsValideSeller = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      ifu = _useState12[0],\n      setIfu = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      photoID = _useState14[0],\n      setPhotoID = _useState14[1];\n\n  var _useState15 = useState(''),\n      _useState16 = _slicedToArray(_useState15, 2),\n      sellername = _useState16[0],\n      setSellername = _useState16[1];\n\n  var _useState17 = useState(''),\n      _useState18 = _slicedToArray(_useState17, 2),\n      logo = _useState18[0],\n      setLogo = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      description = _useState20[0],\n      setDescription = _useState20[1];\n\n  useEffect(function () {\n    var fetchData = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$axios$get, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.get(\"/api/users/\".concat(userId), {\n                  headers: {\n                    Authorization: \"Bearer \".concat(userInfo.token)\n                  }\n                });\n\n              case 3:\n                _yield$axios$get = _context.sent;\n                data = _yield$axios$get.data;\n                setName(data.name);\n                setEmail(data.email);\n                setIsAdmin(data.isAdmin);\n                setIsSeller(data.isSeller);\n                setIsValideSeller(data.isValideSeller);\n                setIfu(data.seller.ifu);\n                setPhotoID(data.seller.photoID);\n                setSellername(data.seller.name);\n                setLogo(data.seller.logo);\n                setDescription(data.seller.description);\n                dispatch({\n                  type: 'FETCH_SUCCESS'\n                });\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](0);\n                dispatch({\n                  type: 'FETCH_FAIL',\n                  payload: getError(_context.t0)\n                });\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 18]]);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, [userId, userInfo]);\n\n  var submitHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              dispatch({\n                type: 'UPDATE_REQUEST'\n              });\n              _context2.next = 5;\n              return axios.put(\"/api/users/\".concat(userId), {\n                _id: userId,\n                name: name,\n                email: email,\n                isAdmin: isAdmin,\n                isValideSeller: isValideSeller\n              }, {\n                headers: {\n                  Authorization: \"Bearer \".concat(userInfo.token)\n                }\n              });\n\n            case 5:\n              dispatch({\n                type: 'UPDATE_SUCCESS'\n              });\n              toast.success('User updated successfully');\n              navigate('/admin/users');\n              _context2.next = 14;\n              break;\n\n            case 10:\n              _context2.prev = 10;\n              _context2.t0 = _context2[\"catch\"](1);\n              toast.error(getError(_context2.t0));\n              dispatch({\n                type: 'UPDATE_FAIL'\n              });\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 10]]);\n    }));\n\n    return function submitHandler(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"small-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Edit User $\", userId)), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, \"Edit user \", userId), loading ? /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }) : error ? /*#__PURE__*/React.createElement(MessageBox, {\n    variant: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, error) : /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Form.Check, {\n    className: \"mb-3\",\n    type: \"checkbox\",\n    id: \"isAdmin\",\n    label: \"isAdmin\",\n    checked: isAdmin,\n    onChange: function onChange(e) {\n      return setIsAdmin(e.target.checked);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), isSeller && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, \"Seller Info\"), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"sellername\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Seller Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: sellername,\n    onChange: function onChange(e) {\n      return setSellername(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"ifu\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, \"IFU\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: ifu,\n    onChange: function onChange(e) {\n      return setIfu(e.target.value);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Photo ID\"), /*#__PURE__*/React.createElement(Card, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    src: photoID,\n    alt: \"PhotoID\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, \"Logo\"), /*#__PURE__*/React.createElement(Card, {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    src: logo,\n    alt: \"logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Check, {\n    className: \"mb-3\",\n    type: \"checkbox\",\n    id: \"ValideSeller\",\n    label: \"Valide Seller\",\n    checked: isValideSeller,\n    onChange: function onChange(e) {\n      return setIsValideSeller(e.target.checked);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: loadingUpdate,\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, \"Update\"), loadingUpdate && /*#__PURE__*/React.createElement(LoadingBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 31\n    }\n  }))));\n};\n\nexport default UserEditScreen;","map":{"version":3,"sources":["I:/node_projects/bmzn/frontend/src/UserEditScreen.js"],"names":["axios","React","useContext","useEffect","useReducer","useState","Button","Container","Card","Form","Helmet","useNavigate","useParams","toast","LoadingBox","MessageBox","Store","getError","reducer","state","action","type","loading","error","payload","loadingUpdate","UserEditScreen","dispatch","userInfo","params","userId","id","navigate","name","setName","email","setEmail","isAdmin","setIsAdmin","isSeller","setIsSeller","isValideSeller","setIsValideSeller","ifu","setIfu","photoID","setPhotoID","sellername","setSellername","logo","setLogo","description","setDescription","fetchData","get","headers","Authorization","token","data","seller","submitHandler","e","preventDefault","put","_id","success","target","value","checked"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,UAAvC,EAAmDC,QAAnD,QAAmE,OAAnE;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,kBAAvC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,QAAT,QAAyB,SAAzB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,eAAL;AACE,+BAAYF,KAAZ;AAAmBG,QAAAA,OAAO,EAAE;AAA5B;;AACF,SAAK,eAAL;AACE,+BAAYH,KAAZ;AAAmBG,QAAAA,OAAO,EAAE;AAA5B;;AACF,SAAK,YAAL;AACE,+BAAYH,KAAZ;AAAmBG,QAAAA,OAAO,EAAE,KAA5B;AAAmCC,QAAAA,KAAK,EAAEH,MAAM,CAACI;AAAjD;;AACF,SAAK,gBAAL;AACE,+BAAYL,KAAZ;AAAmBM,QAAAA,aAAa,EAAE;AAAlC;;AACF,SAAK,gBAAL;AACE,+BAAYN,KAAZ;AAAmBM,QAAAA,aAAa,EAAE;AAAlC;;AACF,SAAK,aAAL;AACE,+BAAYN,KAAZ;AAAmBM,QAAAA,aAAa,EAAE;AAAlC;;AACF;AACE,aAAON,KAAP;AAdJ;AAgBD,CAjBD;;AAmBA,IAAMO,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAAA,oBAC2BtB,UAAU,CAACc,OAAD,EAAU;AACxEI,IAAAA,OAAO,EAAE,IAD+D;AAExEC,IAAAA,KAAK,EAAE;AAFiE,GAAV,CADrC;AAAA;AAAA;AAAA,MAClBD,OADkB,iBAClBA,OADkB;AAAA,MACTC,KADS,iBACTA,KADS;AAAA,MACFE,aADE,iBACFA,aADE;AAAA,MACeE,QADf;;AAAA,oBAMTzB,UAAU,CAACc,KAAD,CAND;AAAA,MAMnBG,KANmB,eAMnBA,KANmB;;AAAA,MAOnBS,QAPmB,GAONT,KAPM,CAOnBS,QAPmB;AAS3B,MAAMC,MAAM,GAAGjB,SAAS,EAAxB;AAT2B,MAUfkB,MAVe,GAUJD,MAVI,CAUnBE,EAVmB;AAW3B,MAAMC,QAAQ,GAAGrB,WAAW,EAA5B;;AAX2B,kBAaHN,QAAQ,CAAC,EAAD,CAbL;AAAA;AAAA,MAapB4B,IAboB;AAAA,MAadC,OAbc;;AAAA,mBAcD7B,QAAQ,CAAC,EAAD,CAdP;AAAA;AAAA,MAcpB8B,KAdoB;AAAA,MAcbC,QAda;;AAAA,mBAeG/B,QAAQ,CAAC,KAAD,CAfX;AAAA;AAAA,MAepBgC,OAfoB;AAAA,MAeXC,UAfW;;AAAA,mBAgBKjC,QAAQ,CAAC,KAAD,CAhBb;AAAA;AAAA,MAgBpBkC,QAhBoB;AAAA,MAgBVC,WAhBU;;AAAA,mBAiBiBnC,QAAQ,CAAC,KAAD,CAjBzB;AAAA;AAAA,MAiBpBoC,cAjBoB;AAAA,MAiBJC,iBAjBI;;AAAA,oBAkBLrC,QAAQ,CAAC,EAAD,CAlBH;AAAA;AAAA,MAkBpBsC,GAlBoB;AAAA,MAkBfC,MAlBe;;AAAA,oBAmBGvC,QAAQ,CAAC,EAAD,CAnBX;AAAA;AAAA,MAmBpBwC,OAnBoB;AAAA,MAmBXC,UAnBW;;AAAA,oBAoBSzC,QAAQ,CAAC,EAAD,CApBjB;AAAA;AAAA,MAoBpB0C,UApBoB;AAAA,MAoBRC,aApBQ;;AAAA,oBAqBH3C,QAAQ,CAAC,EAAD,CArBL;AAAA;AAAA,MAqBpB4C,IArBoB;AAAA,MAqBdC,OArBc;;AAAA,oBAsBW7C,QAAQ,CAAC,EAAD,CAtBnB;AAAA;AAAA,MAsBpB8C,WAtBoB;AAAA,MAsBPC,cAtBO;;AAwB3BjD,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMkD,SAAS;AAAA,0EAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAESrD,KAAK,CAACsD,GAAN,sBAAwBxB,MAAxB,GAAkC;AACvDyB,kBAAAA,OAAO,EAAE;AAAEC,oBAAAA,aAAa,mBAAY5B,QAAQ,CAAC6B,KAArB;AAAf;AAD8C,iBAAlC,CAFT;;AAAA;AAAA;AAENC,gBAAAA,IAFM,oBAENA,IAFM;AAKdxB,gBAAAA,OAAO,CAACwB,IAAI,CAACzB,IAAN,CAAP;AACAG,gBAAAA,QAAQ,CAACsB,IAAI,CAACvB,KAAN,CAAR;AACAG,gBAAAA,UAAU,CAACoB,IAAI,CAACrB,OAAN,CAAV;AACAG,gBAAAA,WAAW,CAACkB,IAAI,CAACnB,QAAN,CAAX;AACAG,gBAAAA,iBAAiB,CAACgB,IAAI,CAACjB,cAAN,CAAjB;AACAG,gBAAAA,MAAM,CAACc,IAAI,CAACC,MAAL,CAAYhB,GAAb,CAAN;AACAG,gBAAAA,UAAU,CAACY,IAAI,CAACC,MAAL,CAAYd,OAAb,CAAV;AACAG,gBAAAA,aAAa,CAACU,IAAI,CAACC,MAAL,CAAY1B,IAAb,CAAb;AACAiB,gBAAAA,OAAO,CAACQ,IAAI,CAACC,MAAL,CAAYV,IAAb,CAAP;AACAG,gBAAAA,cAAc,CAACM,IAAI,CAACC,MAAL,CAAYR,WAAb,CAAd;AACAxB,gBAAAA,QAAQ,CAAC;AAAEN,kBAAAA,IAAI,EAAE;AAAR,iBAAD,CAAR;AAfc;AAAA;;AAAA;AAAA;AAAA;AAiBdM,gBAAAA,QAAQ,CAAC;AAAEN,kBAAAA,IAAI,EAAE,YAAR;AAAsBG,kBAAAA,OAAO,EAAEP,QAAQ;AAAvC,iBAAD,CAAR;;AAjBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA,sBAAToC,SAAS;AAAA;AAAA;AAAA,OAAf;;AAoBAA,IAAAA,SAAS;AACV,GAtBQ,EAsBN,CAACvB,MAAD,EAASF,QAAT,CAtBM,CAAT;;AAwBA,MAAMgC,aAAa;AAAA,yEAAG,kBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AACpBA,cAAAA,CAAC,CAACC,cAAF;AADoB;AAGlBnC,cAAAA,QAAQ,CAAC;AAAEN,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAR;AAHkB;AAAA,qBAIZrB,KAAK,CAAC+D,GAAN,sBACUjC,MADV,GAEJ;AAAEkC,gBAAAA,GAAG,EAAElC,MAAP;AAAeG,gBAAAA,IAAI,EAAJA,IAAf;AAAqBE,gBAAAA,KAAK,EAALA,KAArB;AAA4BE,gBAAAA,OAAO,EAAPA,OAA5B;AAAqCI,gBAAAA,cAAc,EAAdA;AAArC,eAFI,EAGJ;AACEc,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,aAAa,mBAAY5B,QAAQ,CAAC6B,KAArB;AAAf;AADX,eAHI,CAJY;;AAAA;AAWlB9B,cAAAA,QAAQ,CAAC;AAAEN,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAR;AACAR,cAAAA,KAAK,CAACoD,OAAN,CAAc,2BAAd;AACAjC,cAAAA,QAAQ,CAAC,cAAD,CAAR;AAbkB;AAAA;;AAAA;AAAA;AAAA;AAelBnB,cAAAA,KAAK,CAACU,KAAN,CAAYN,QAAQ,cAApB;AACAU,cAAAA,QAAQ,CAAC;AAAEN,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAR;;AAhBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbuC,aAAa;AAAA;AAAA;AAAA,KAAnB;;AAoBA,sBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,iBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAmB9B,MAAnB,CADF,CADF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAeA,MAAf,CAJF,EAMGR,OAAO,gBACN,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADM,GAEJC,KAAK,gBACP,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA8BA,KAA9B,CADO,gBAGP,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEqC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,KAAK,EAAE3B,IADT;AAEE,IAAA,QAAQ,EAAE,kBAAC4B,CAAD;AAAA,aAAO3B,OAAO,CAAC2B,CAAC,CAACK,MAAF,CAASC,KAAV,CAAd;AAAA,KAFZ;AAGE,IAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,eASE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,KAAK,EAAEhC,KADT;AAEE,IAAA,QAAQ,EAAE,kBAAC0B,CAAD;AAAA,aAAOzB,QAAQ,CAACyB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAf;AAAA,KAFZ;AAGE,IAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CATF,eAiBE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,SAAS,EAAC,MADZ;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,EAAE,EAAC,SAHL;AAIE,IAAA,KAAK,EAAC,SAJR;AAKE,IAAA,OAAO,EAAE9B,OALX;AAME,IAAA,QAAQ,EAAE,kBAACwB,CAAD;AAAA,aAAOvB,UAAU,CAACuB,CAAC,CAACK,MAAF,CAASE,OAAV,CAAjB;AAAA,KANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,EAyBG7B,QAAQ,iBACP,uDACE;AAAI,IAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,YAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,KAAK,EAAEQ,UADT;AAEE,IAAA,QAAQ,EAAE,kBAACc,CAAD;AAAA,aAAOb,aAAa,CAACa,CAAC,CAACK,MAAF,CAASC,KAAV,CAApB;AAAA,KAFZ;AAGE,IAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAFF,eAUE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,KAAK,EAAExB,GADT;AAEE,IAAA,QAAQ,EAAE,kBAACkB,CAAD;AAAA,aAAOjB,MAAM,CAACiB,CAAC,CAACK,MAAF,CAASC,KAAV,CAAb;AAAA,KAFZ;AAGE,IAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAVF,eAkBE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBF,eAmBE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,GAAN;AAAU,IAAA,OAAO,EAAC,KAAlB;AAAwB,IAAA,GAAG,EAAEtB,OAA7B;AAAsC,IAAA,GAAG,EAAC,SAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAnBF,eAsBE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAtBF,eAuBE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,GAAN;AAAU,IAAA,OAAO,EAAC,KAAlB;AAAwB,IAAA,GAAG,EAAEI,IAA7B;AAAmC,IAAA,GAAG,EAAC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAvBF,eA0BE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,SAAS,EAAC,MADZ;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,EAAE,EAAC,cAHL;AAIE,IAAA,KAAK,EAAC,eAJR;AAKE,IAAA,OAAO,EAAER,cALX;AAME,IAAA,QAAQ,EAAE,kBAACoB,CAAD;AAAA,aAAOnB,iBAAiB,CAACmB,CAAC,CAACK,MAAF,CAASE,OAAV,CAAxB;AAAA,KANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1BF,CA1BJ,eA8DE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAE3C,aAAlB;AAAiC,IAAA,IAAI,EAAC,QAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAIGA,aAAa,iBAAI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJpB,CA9DF,CAXJ,CADF;AAoFD,CAxJD;;AA0JA,eAAeC,cAAf","sourcesContent":["import axios from 'axios';\r\nimport React, { useContext, useEffect, useReducer, useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport LoadingBox from './LoadingBox';\r\nimport MessageBox from './MessageBox';\r\nimport { Store } from './Store';\r\nimport { getError } from './utils';\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_REQUEST':\r\n      return { ...state, loading: true };\r\n    case 'FETCH_SUCCESS':\r\n      return { ...state, loading: false };\r\n    case 'FETCH_FAIL':\r\n      return { ...state, loading: false, error: action.payload };\r\n    case 'UPDATE_REQUEST':\r\n      return { ...state, loadingUpdate: true };\r\n    case 'UPDATE_SUCCESS':\r\n      return { ...state, loadingUpdate: false };\r\n    case 'UPDATE_FAIL':\r\n      return { ...state, loadingUpdate: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst UserEditScreen = () => {\r\n  const [{ loading, error, loadingUpdate }, dispatch] = useReducer(reducer, {\r\n    loading: true,\r\n    error: '',\r\n  });\r\n\r\n  const { state } = useContext(Store);\r\n  const { userInfo } = state;\r\n\r\n  const params = useParams();\r\n  const { id: userId } = params;\r\n  const navigate = useNavigate();\r\n\r\n  const [name, setName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [isSeller, setIsSeller] = useState(false);\r\n  const [isValideSeller, setIsValideSeller] = useState(false);\r\n  const [ifu, setIfu] = useState('');\r\n  const [photoID, setPhotoID] = useState('');\r\n  const [sellername, setSellername] = useState('');\r\n  const [logo, setLogo] = useState('');\r\n  const [description, setDescription] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const { data } = await axios.get(`/api/users/${userId}`, {\r\n          headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        setName(data.name);\r\n        setEmail(data.email);\r\n        setIsAdmin(data.isAdmin);\r\n        setIsSeller(data.isSeller);\r\n        setIsValideSeller(data.isValideSeller);\r\n        setIfu(data.seller.ifu);\r\n        setPhotoID(data.seller.photoID);\r\n        setSellername(data.seller.name);\r\n        setLogo(data.seller.logo);\r\n        setDescription(data.seller.description);\r\n        dispatch({ type: 'FETCH_SUCCESS' });\r\n      } catch (err) {\r\n        dispatch({ type: 'FETCH_FAIL', payload: getError(err) });\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [userId, userInfo]);\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      dispatch({ type: 'UPDATE_REQUEST' });\r\n      await axios.put(\r\n        `/api/users/${userId}`,\r\n        { _id: userId, name, email, isAdmin, isValideSeller },\r\n        {\r\n          headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        }\r\n      );\r\n      dispatch({ type: 'UPDATE_SUCCESS' });\r\n      toast.success('User updated successfully');\r\n      navigate('/admin/users');\r\n    } catch (error) {\r\n      toast.error(getError(error));\r\n      dispatch({ type: 'UPDATE_FAIL' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container className=\"small-container\">\r\n      <Helmet>\r\n        <title>Edit User ${userId}</title>\r\n      </Helmet>\r\n      <h1>Edit user {userId}</h1>\r\n\r\n      {loading ? (\r\n        <LoadingBox></LoadingBox>\r\n      ) : error ? (\r\n        <MessageBox variant=\"danger\">{error}</MessageBox>\r\n      ) : (\r\n        <Form onSubmit={submitHandler}>\r\n          <Form.Group className=\"mb-3\" controlId=\"name\">\r\n            <Form.Label>Name</Form.Label>\r\n            <Form.Control\r\n              value={name}\r\n              onChange={(e) => setName(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Group className=\"mb-3\" controlId=\"email\">\r\n            <Form.Label>Email</Form.Label>\r\n            <Form.Control\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </Form.Group>\r\n          <Form.Check\r\n            className=\"mb-3\"\r\n            type=\"checkbox\"\r\n            id=\"isAdmin\"\r\n            label=\"isAdmin\"\r\n            checked={isAdmin}\r\n            onChange={(e) => setIsAdmin(e.target.checked)}\r\n          />\r\n          {isSeller && (\r\n            <>\r\n              <h1 className=\"mb-3\">Seller Info</h1>\r\n              <Form.Group className=\"mb-3\" controlId=\"sellername\">\r\n                <Form.Label>Seller Name</Form.Label>\r\n                <Form.Control\r\n                  value={sellername}\r\n                  onChange={(e) => setSellername(e.target.value)}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Group className=\"mb-3\" controlId=\"ifu\">\r\n                <Form.Label>IFU</Form.Label>\r\n                <Form.Control\r\n                  value={ifu}\r\n                  onChange={(e) => setIfu(e.target.value)}\r\n                  required\r\n                />\r\n              </Form.Group>\r\n              <Form.Label>Photo ID</Form.Label>\r\n              <Card className=\"mb-3\">\r\n                <Card.Img variant=\"top\" src={photoID} alt=\"PhotoID\" />\r\n              </Card>\r\n              <Form.Label>Logo</Form.Label>\r\n              <Card className=\"mb-3\">\r\n                <Card.Img variant=\"top\" src={logo} alt=\"logo\" />\r\n              </Card>\r\n              <Form.Check\r\n                className=\"mb-3\"\r\n                type=\"checkbox\"\r\n                id=\"ValideSeller\"\r\n                label=\"Valide Seller\"\r\n                checked={isValideSeller}\r\n                onChange={(e) => setIsValideSeller(e.target.checked)}\r\n              />\r\n            </>\r\n          )}\r\n          <div className=\"mb-3\">\r\n            <Button disabled={loadingUpdate} type=\"submit\">\r\n              Update\r\n            </Button>\r\n            {loadingUpdate && <LoadingBox></LoadingBox>}\r\n          </div>\r\n        </Form>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserEditScreen;\r\n"]},"metadata":{},"sourceType":"module"}