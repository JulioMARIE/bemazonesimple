{"ast":null,"code":"import _regeneratorRuntime from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\src\\\\ProfileScreen.js\";\nimport React, { useContext, useReducer, useState } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Store } from './Store';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { toast } from 'react-toastify';\nimport { getError } from './utils';\nimport axios from 'axios';\n\nvar reducer = function reducer(state, action) {\n  switch (action.type) {\n    case 'UPDATE_REQUEST':\n      return _objectSpread({}, state, {\n        loadingUpdate: true\n      });\n\n    case 'UPDATE_SUCCESS':\n      return _objectSpread({}, state, {\n        loadingUpdate: false\n      });\n\n    case 'UPDATE_FAIL':\n      return _objectSpread({}, state, {\n        loadingUpdate: false\n      });\n\n    default:\n      return state;\n  }\n};\n\nfunction ProfileScreen() {\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      ctxDispatch = _useContext.dispatch;\n\n  var userInfo = state.userInfo;\n\n  var _useState = useState(userInfo.name),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(userInfo.email),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      confirmPassword = _useState8[0],\n      setConfirmPassword = _useState8[1];\n\n  var _useReducer = useReducer(reducer, {\n    loadingUpdate: false\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      loadingUpdate = _useReducer2[0].loadingUpdate,\n      dispatch = _useReducer2[1];\n\n  var submitHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var _yield$axios$put, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n\n              if (password !== confirmPassword) {\n                toast.error('Password not match');\n              }\n\n              _context.prev = 2;\n              dispatch({\n                type: 'UPDATE_REQUEST'\n              });\n              _context.next = 6;\n              return axios.put('/api/users/profile', {\n                name: name,\n                email: email,\n                password: password\n              }, {\n                headers: {\n                  Authorization: \"Bearer \".concat(userInfo.token)\n                }\n              });\n\n            case 6:\n              _yield$axios$put = _context.sent;\n              data = _yield$axios$put.data;\n              dispatch({\n                type: 'UPDATE_SUCCESS'\n              });\n              ctxDispatch({\n                type: 'USER_SIGNIN',\n                payload: data\n              });\n              localStorage.setItem('userInfo', JSON.stringify(data));\n              toast.success('User updated successfully');\n              _context.next = 18;\n              break;\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](2);\n              dispatch({\n                type: 'UPDATE_FAIL'\n              });\n              toast.error(getError(_context.t0));\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 14]]);\n    }));\n\n    return function submitHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container small-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"User Profile\")), /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, \"User Profile\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"email\",\n    value: email,\n    required: true,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    controlId: \"confirmpassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"Confirm Password\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    onChange: function onChange(e) {\n      return setConfirmPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Update Profile\"))));\n}\n\nexport default ProfileScreen;","map":{"version":3,"sources":["I:/node_projects/bmzn/frontend/src/ProfileScreen.js"],"names":["React","useContext","useReducer","useState","Helmet","Store","Button","Form","toast","getError","axios","reducer","state","action","type","loadingUpdate","ProfileScreen","ctxDispatch","dispatch","userInfo","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","submitHandler","e","preventDefault","error","put","headers","Authorization","token","data","payload","localStorage","setItem","JSON","stringify","success","target","value"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,UAA5B,EAAwCC,QAAxC,QAAwD,OAAxD;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,QAAT,QAAyB,SAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,KAAD,EAAQC,MAAR,EAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,gBAAL;AACE,+BAAYF,KAAZ;AAAmBG,QAAAA,aAAa,EAAE;AAAlC;;AACF,SAAK,gBAAL;AACE,+BAAYH,KAAZ;AAAmBG,QAAAA,aAAa,EAAE;AAAlC;;AACF,SAAK,aAAL;AACE,+BAAYH,KAAZ;AAAmBG,QAAAA,aAAa,EAAE;AAAlC;;AAEF;AACE,aAAOH,KAAP;AATJ;AAWD,CAZD;;AAcA,SAASI,aAAT,GAAyB;AAAA,oBACkBf,UAAU,CAACI,KAAD,CAD5B;AAAA,MACfO,KADe,eACfA,KADe;AAAA,MACEK,WADF,eACRC,QADQ;;AAAA,MAEfC,QAFe,GAEFP,KAFE,CAEfO,QAFe;;AAAA,kBAIChB,QAAQ,CAACgB,QAAQ,CAACC,IAAV,CAJT;AAAA;AAAA,MAIhBA,IAJgB;AAAA,MAIVC,OAJU;;AAAA,mBAKGlB,QAAQ,CAACgB,QAAQ,CAACG,KAAV,CALX;AAAA;AAAA,MAKhBA,KALgB;AAAA,MAKTC,QALS;;AAAA,mBAMSpB,QAAQ,CAAC,EAAD,CANjB;AAAA;AAAA,MAMhBqB,QANgB;AAAA,MAMNC,WANM;;AAAA,mBAOuBtB,QAAQ,CAAC,EAAD,CAP/B;AAAA;AAAA,MAOhBuB,eAPgB;AAAA,MAOCC,kBAPD;;AAAA,oBAQezB,UAAU,CAACS,OAAD,EAAU;AACxDI,IAAAA,aAAa,EAAE;AADyC,GAAV,CARzB;AAAA;AAAA,MAQdA,aARc,mBAQdA,aARc;AAAA,MAQGG,QARH;;AAWvB,MAAMU,aAAa;AAAA,wEAAG,iBAAOC,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACpBA,cAAAA,CAAC,CAACC,cAAF;;AACA,kBAAIN,QAAQ,KAAKE,eAAjB,EAAkC;AAChClB,gBAAAA,KAAK,CAACuB,KAAN,CAAY,oBAAZ;AACD;;AAJmB;AAMlBb,cAAAA,QAAQ,CAAC;AAAEJ,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAR;AANkB;AAAA,qBAOKJ,KAAK,CAACsB,GAAN,CACrB,oBADqB,EAErB;AACEZ,gBAAAA,IAAI,EAAJA,IADF;AAEEE,gBAAAA,KAAK,EAALA,KAFF;AAGEE,gBAAAA,QAAQ,EAARA;AAHF,eAFqB,EAOrB;AACES,gBAAAA,OAAO,EAAE;AAAEC,kBAAAA,aAAa,mBAAYf,QAAQ,CAACgB,KAArB;AAAf;AADX,eAPqB,CAPL;;AAAA;AAAA;AAOVC,cAAAA,IAPU,oBAOVA,IAPU;AAkBlBlB,cAAAA,QAAQ,CAAC;AAAEJ,gBAAAA,IAAI,EAAE;AAAR,eAAD,CAAR;AACAG,cAAAA,WAAW,CAAC;AAAEH,gBAAAA,IAAI,EAAE,aAAR;AAAuBuB,gBAAAA,OAAO,EAAED;AAAhC,eAAD,CAAX;AACAE,cAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAjC;AACA5B,cAAAA,KAAK,CAACkC,OAAN,CAAc,2BAAd;AArBkB;AAAA;;AAAA;AAAA;AAAA;AAuBlBxB,cAAAA,QAAQ,CAAC;AACPJ,gBAAAA,IAAI,EAAE;AADC,eAAD,CAAR;AAGAN,cAAAA,KAAK,CAACuB,KAAN,CAAYtB,QAAQ,aAApB;;AA1BkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAbmB,aAAa;AAAA;AAAA;AAAA,KAAnB;;AA8BA,sBACE;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,CADF,eAIE;AAAI,IAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,eAKE,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAEA,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,KAAK,EAAER,IADT;AAEE,IAAA,QAAQ,EAAE,kBAACS,CAAD;AAAA,aAAOR,OAAO,CAACQ,CAAC,CAACc,MAAF,CAASC,KAAV,CAAd;AAAA,KAFZ;AAGE,IAAA,QAAQ,MAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,eASE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,OADP;AAEE,IAAA,KAAK,EAAEtB,KAFT;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,QAAQ,EAAE,kBAACO,CAAD;AAAA,aAAON,QAAQ,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAf;AAAA,KAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CATF,eAkBE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,UAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,QAAQ,EAAE,kBAACf,CAAD;AAAA,aAAOJ,WAAW,CAACI,CAAC,CAACc,MAAF,CAASC,KAAV,CAAlB;AAAA,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAlBF,eAyBE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,SAAS,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,iBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE,oBAAC,IAAD,CAAM,OAAN;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,QAAQ,EAAE,kBAACf,CAAD;AAAA,aAAOF,kBAAkB,CAACE,CAAC,CAACc,MAAF,CAASC,KAAV,CAAzB;AAAA,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAzBF,eAgCE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CAhCF,CALF,CADF;AA4CD;;AAED,eAAe5B,aAAf","sourcesContent":["import React, { useContext, useReducer, useState } from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { Store } from './Store';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { toast } from 'react-toastify';\r\nimport { getError } from './utils';\r\nimport axios from 'axios';\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'UPDATE_REQUEST':\r\n      return { ...state, loadingUpdate: true };\r\n    case 'UPDATE_SUCCESS':\r\n      return { ...state, loadingUpdate: false };\r\n    case 'UPDATE_FAIL':\r\n      return { ...state, loadingUpdate: false };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction ProfileScreen() {\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const { userInfo } = state;\r\n\r\n  const [name, setName] = useState(userInfo.name);\r\n  const [email, setEmail] = useState(userInfo.email);\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [{ loadingUpdate }, dispatch] = useReducer(reducer, {\r\n    loadingUpdate: false,\r\n  });\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    if (password !== confirmPassword) {\r\n      toast.error('Password not match');\r\n    }\r\n    try {\r\n      dispatch({ type: 'UPDATE_REQUEST' });\r\n      const { data } = await axios.put(\r\n        '/api/users/profile',\r\n        {\r\n          name,\r\n          email,\r\n          password,\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        }\r\n      );\r\n      dispatch({ type: 'UPDATE_SUCCESS' });\r\n      ctxDispatch({ type: 'USER_SIGNIN', payload: data });\r\n      localStorage.setItem('userInfo', JSON.stringify(data));\r\n      toast.success('User updated successfully');\r\n    } catch (error) {\r\n      dispatch({\r\n        type: 'UPDATE_FAIL',\r\n      });\r\n      toast.error(getError(error));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container small-container\">\r\n      <Helmet>\r\n        <title>User Profile</title>\r\n      </Helmet>\r\n      <h1 className=\"my-3\">User Profile</h1>\r\n      <Form onSubmit={submitHandler}>\r\n        <Form.Group className=\"mb-3\" controlId=\"name\">\r\n          <Form.Label>Name</Form.Label>\r\n          <Form.Control\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            required\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"email\">\r\n          <Form.Label>Email</Form.Label>\r\n          <Form.Control\r\n            type=\"email\"\r\n            value={email}\r\n            required\r\n            onChange={(e) => setEmail(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"password\">\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Form.Group className=\"mb-3\" controlId=\"confirmpassword\">\r\n          <Form.Label>Confirm Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e) => setConfirmPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <div className=\"mb-3\">\r\n          <Button type=\"submit\">Update Profile</Button>\r\n        </div>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileScreen;\r\n"]},"metadata":{},"sourceType":"module"}