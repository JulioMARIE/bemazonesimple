{"ast":null,"code":"import _regeneratorRuntime from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _objectSpread from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"I:\\\\node_projects\\\\bmzn\\\\frontend\\\\src\\\\CartScreen.js\";\nimport React, { useContext } from 'react';\nimport { Store } from './Store';\nimport { Helmet } from 'react-helmet-async';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MessageBox from './MessageBox';\nimport { Link, useNavigate } from 'react-router-dom';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport axios from 'axios';\n\nfunction CartScreen() {\n  var _this = this;\n\n  var _useContext = useContext(Store),\n      state = _useContext.state,\n      ctxDispatch = _useContext.dispatch;\n\n  var _state$cart = state.cart,\n      cartItems = _state$cart.cartItems,\n      shippingAddress = _state$cart.shippingAddress,\n      paymentMethod = _state$cart.paymentMethod;\n  var navigate = useNavigate();\n\n  var updateCartHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item, quantity) {\n      var _yield$axios$get, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"/api/products/\".concat(item._id));\n\n            case 2:\n              _yield$axios$get = _context.sent;\n              data = _yield$axios$get.data;\n\n              if (!(data.countInStock < quantity)) {\n                _context.next = 7;\n                break;\n              }\n\n              window.alert('Sorry. Product is out of stock');\n              return _context.abrupt(\"return\");\n\n            case 7:\n              ctxDispatch({\n                type: 'CART_ADD_ITEM',\n                payload: _objectSpread({}, item, {\n                  quantity: quantity\n                })\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateCartHandler(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var removeItemHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              ctxDispatch({\n                type: 'CART_REMOVE_ITEM',\n                payload: _objectSpread({}, item)\n              });\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function removeItemHandler(_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var checkoutHandler = function checkoutHandler() {\n    navigate(\"/signin?redirect=\".concat(shippingAddress ? '/shipping' : paymentMethod ? '/payment' : ''));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, \"Shopping Cart\")), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, cartItems.length === 0 ? /*#__PURE__*/React.createElement(MessageBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Cart is empty. \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 30\n    }\n  }, \"Go Shopping\")) : /*#__PURE__*/React.createElement(ListGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, cartItems.map(function (item) {\n    return /*#__PURE__*/React.createElement(ListGroup.Item, {\n      key: item._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"align-items-center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      md: 4,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: item.image,\n      alt: item.name,\n      className: \"img-fluid rounded img-thumbnail\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 23\n      }\n    }), ' ', /*#__PURE__*/React.createElement(Link, {\n      to: \"/product/\".concat(item.slug),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 23\n      }\n    }, item.name)), /*#__PURE__*/React.createElement(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: function onClick() {\n        return updateCartHandler(item, item.quantity - 1);\n      },\n      disabled: item.quantity === 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-minus-circle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }\n    })), ' ', /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }\n    }, item.quantity), ' ', /*#__PURE__*/React.createElement(Button, {\n      variant: \"light\",\n      onClick: function onClick() {\n        return updateCartHandler(item, item.quantity + 1);\n      },\n      disabled: item.quantity === item.countInStock,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-plus-circle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Col, {\n      md: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, \"$\", item.price), /*#__PURE__*/React.createElement(Col, {\n      md: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: function onClick() {\n        return removeItemHandler(item);\n      },\n      variant: \"light\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-trash\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 25\n      }\n    })))));\n  }))), /*#__PURE__*/React.createElement(Col, {\n    md: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, \"Subtotal (\", cartItems.reduce(function (a, c) {\n    return a + c.quantity;\n  }, 0), ' ', \"items): $\", cartItems.reduce(function (a, c) {\n    return a + c.price * c.quantity;\n  }, 0))), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    variant: \"primary\",\n    onClick: checkoutHandler,\n    disabled: cartItems.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, \"Proceed to Checkout\")))))))));\n}\n\nexport default CartScreen;","map":{"version":3,"sources":["I:/node_projects/bmzn/frontend/src/CartScreen.js"],"names":["React","useContext","Store","Helmet","Row","Col","MessageBox","Link","useNavigate","ListGroup","Button","Card","axios","CartScreen","state","ctxDispatch","dispatch","cart","cartItems","shippingAddress","paymentMethod","navigate","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\r\nimport { Store } from './Store';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MessageBox from './MessageBox';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport axios from 'axios';\r\n\r\nfunction CartScreen() {\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const {\r\n    cart: { cartItems, shippingAddress, paymentMethod },\r\n  } = state;\r\n  const navigate = useNavigate();\r\n\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(`/api/products/${item._id}`);\r\n    if (data.countInStock < quantity) {\r\n      window.alert('Sorry. Product is out of stock');\r\n      return;\r\n    }\r\n    ctxDispatch({\r\n      type: 'CART_ADD_ITEM',\r\n      payload: { ...item, quantity },\r\n    });\r\n  };\r\n  const removeItemHandler = async (item) => {\r\n    ctxDispatch({\r\n      type: 'CART_REMOVE_ITEM',\r\n      payload: { ...item },\r\n    });\r\n  };\r\n  const checkoutHandler = () => {\r\n    navigate(\r\n      `/signin?redirect=${\r\n        shippingAddress ? '/shipping' : paymentMethod ? '/payment' : ''\r\n      }`\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Helmet>\r\n        <title>Shopping Cart</title>\r\n      </Helmet>\r\n      <h1>Shopping Cart</h1>\r\n      <Row>\r\n        <Col md={8}>\r\n          {cartItems.length === 0 ? (\r\n            <MessageBox>\r\n              Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n            </MessageBox>\r\n          ) : (\r\n            <ListGroup>\r\n              {cartItems.map((item) => (\r\n                <ListGroup.Item key={item._id}>\r\n                  <Row className=\"align-items-center\">\r\n                    <Col md={4}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"img-fluid rounded img-thumbnail\"\r\n                      />{' '}\r\n                      <Link to={`/product/${item.slug}`}>{item.name}</Link>\r\n                    </Col>\r\n                    <Col md={3}>\r\n                      <Button\r\n                        variant=\"light\"\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity - 1)\r\n                        }\r\n                        disabled={item.quantity === 1}\r\n                      >\r\n                        <i className=\"fas fa-minus-circle\"></i>\r\n                      </Button>{' '}\r\n                      <span>{item.quantity}</span>{' '}\r\n                      <Button\r\n                        variant=\"light\"\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity + 1)\r\n                        }\r\n                        disabled={item.quantity === item.countInStock}\r\n                      >\r\n                        <i className=\"fas fa-plus-circle\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                    <Col md={3}>${item.price}</Col>\r\n                    <Col md={2}>\r\n                      <Button\r\n                        onClick={() => removeItemHandler(item)}\r\n                        variant=\"light\"\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h3>\r\n                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                    items): $\r\n                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\r\n                  </h3>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <div className=\"d-grid\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"primary\"\r\n                      onClick={checkoutHandler}\r\n                      disabled={cartItems.length === 0}\r\n                    >\r\n                      Proceed to Checkout\r\n                    </Button>\r\n                  </div>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}